# Dropwizard Scala [![Build Status](https://travis-ci.org/alphagov/dropwizard-scala.png?branch=master)](https://travis-ci.org/alphagov/dropwizard-scala)

An opinionated wrapper and convenience classes for providing a scala-ified
dropwizard setup.

To add Dropwizard Scala to your project with sbt, add the following lines to
your `build.sbt`:

```
resolvers += "GDS Releases" at "http://alphagov.github.com/maven/releases"
libraryDependencies += "uk.gov.gds" %% "dropwizard-scala" % "0.0.9"
```

Health Checks
=============

*Dropwizard Scala* adds a number of new Dropwizard health checks you may find
useful for your project, including:

Build Info Health Check
-----------------------

The build info health check displays the
[implementation version](http://docs.oracle.com/javase/tutorial/deployment/jar/packageman.html)
of the local manifest as the build number.

To use simply pass in the
[Package](http://docs.oracle.com/javase/7/docs/api/java/lang/Package.html)
object of your micro-service class:

```
healthChecks(
  environment,
  List(
    new BuildInfoHealthCheck(getClass.getPackage)
  )
)
```

You can customise the implementation version of manifests generated by SBT by
adding something like the following to your `build.sbt` file:

```
import sbt.Package.ManifestAttributes
packageOptions := Seq(ManifestAttributes(("Implementation-Version", "BUILDNUMBER")))
```

Publishing
==========

To publish a release or snapshot artefact follow these steps:

First, clone the GOV.UK Github Pages repository:

`
$ git clone git@github.com:alphagov/alphagov.github.com.git
`

Then in your local Dropwizard Scala folder execute the following

```
$ sbt
> set publishMavenStyle := true
> set publishTo := Some(Resolver.file("your local repo", new java.io.File("<path>/maven/snapshots")))
> publish
```

Where ```<path>``` is the cloned folder of the `alphagov.github.com` repo.

Then switch back to the `alphagov.github.com` folder and execute the following:

```
$ git add .
$ git commit -am "Dropwizard Scala release/snapshot version XXX"
$ git push
```

*Note* Be careful what plugins you have installed in your `.sbt/0.13/plugins.sbt`
or `.sbt/plugins.sbt` files as these can be included as dependencies in the
generated POM.
